/**
 * bundle-loader - A loader for loading client side javascript bundles with data attributes
 * @version v0.3.0
 * @link http://github.com/aslansky/bundle-loader
 * @license MIT
 */
!function(t,e,n,r){"object"==typeof exports?module.exports=t(e,n,r):"function"==typeof define&&define.amd?define(function(){return e.Loader=t(e,n,r),e.Loader}):e.Loader=t(e,n,r)}(function(t,e,n){"use strict";function r(){o(),A.autoload&&E.load()}function o(){for(var t=n.querySelectorAll("["+A.attr+"]"),e=0,r=t.length;r>e;e++){var o=t[e].getAttribute(A.attr);o=o.split(",");for(var a=0,u=o.length;u>a;a++)y(b,o[a]+"")||b.push(m(o[a]))}}function a(t){var e=new XMLHttpRequest,n=function(){4===e.readyState&&(this.status>400?(l(t),0>=P&&f()):(this.response||this.responseText)&&(u(this.response||this.responseText),c(t,this.response||this.responseText),0>=P&&f()))};void 0===e.onload?e.onreadystatechange=n:e.onload=n,e.onerror=function(){l(t),0>=P&&f()},e.open("get",A.path+t+".js",!0),e.send()}function u(t,e,r){var o=document.createElement("script");o.setAttribute("defer","defer"),o.setAttribute("async","async"),t?o.text=t:(o.setAttribute("src",e),S(o,"load",function(t){r.call(this,t.type,o.textContent||o.innerText)}),S(o,"error",function(t){n.querySelector("head").removeChild(o),r.call(this,t.type)})),n.querySelector("head").appendChild(o)}function i(t,e){u(e.data),c(t),0>=P&&f()}function c(e,n){P--,L&&n&&s(e,n),q.push(e.toString()),A.onload&&"function"==typeof A.onload&&A.onload.call(t,e,!n)}function l(e){P--,w.push(e.toString()),A.onerror&&"function"==typeof A.onerror&&A.onerror.call(t,e)}function f(){w.length>0&&A.onerror&&"function"==typeof A.onerror?A.onerror.call(t,q,w):A.ondone&&"function"==typeof A.ondone&&A.ondone.call(t,q,w),T&&"function"==typeof T&&(T.call(t),T=null)}function s(t,e){var n=+new Date,r={};r.data=e,r.time=n,r.buster=A.cacheBuster,r.expire=n+60*A.expiration*60*1e3,localStorage.setItem(A.storagePrefix+t,JSON.stringify(r))}function d(t){return t.data&&t.expire-+new Date>0&&t.buster===A.cacheBuster}function p(t){try{var e=JSON.parse(localStorage.getItem(A.storagePrefix+t));return d(e)?e:(localStorage.removeItem(A.storagePrefix+t),!1)}catch(n){return!1}}function h(){try{return"localStorage"in e&&null!==e.localStorage}catch(t){return!1}}function g(t,e,n,r,o){var a=t.target;y(q,e)&&n&&"function"==typeof n?n.call(a,t,q,w):(r&&"function"==typeof r&&r.call(a),t.preventDefault?t.preventDefault():t.returnValue=!1,b.push(e),T=function(){n&&"function"==typeof n&&n.call(a,t,q,w)},o.load())}function v(){for(var t=1,e=arguments.length;e>t;t++)for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(arguments[0][n]=arguments[t][n]);return arguments[0]}function y(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]==e)return!0;return!1}function m(t){return String.prototype.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function S(t,e,n){t.attachEvent?(t["e"+e+n]=n,t[e+n]=function(){t["e"+e+n](window.event)},t.attachEvent("on"+e,t[e+n])):t.addEventListener(e,n,!1)}var x=0,b=[],w=[],q=[],A={},L=h(),P=0,T=null,D={onfile:null,onerror:null,ondone:null,path:"/",attr:"data-require",autoload:!0,store:!0,storagePrefix:"loader-",expiration:2,cacheBuster:""},E=function(t){return x=0,b=[],w=[],q=[],A=v({},D,t),L=L&&A.store,r(),E};return E.load=function(t){return setTimeout(function(){var e=!1;P=b.length,t&&(q=[],w=[],o());for(var n=0,r=b.length;r>n;n++)if(!y(q,u)){var u=b[n];L&&(e=p(u)),e?i(u,e):a(u)}},0),E},E.onclick=function(t,e,r,o){for(var a=n.querySelectorAll(t),u=this,i=0,c=a.length;c>i;i++)S(a[i],"click",function(t){g(t,e,r,o,u)})},E.clearStorage=function(){return L&&localStorage.clear(),E},E.done=function(t){return A.ondone=t,E},E.bundle=function(t){return A.onload=t,E},E.error=function(t){return A.onerror=t,E},E.loaded=q,E.failed=w,E},this,window,document);