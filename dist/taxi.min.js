/**
 * taxi.js - A javascript loader for loading client side bundles on demand.
 * @version v0.3.2
 * @link http://github.com/aslansky/taxi.js
 * @license MIT
 */
!function(t,e,n,r){"object"==typeof exports?module.exports=t(e,n,r):"function"==typeof define&&define.amd?define(function(){return e.Taxi=t(e,n,r),e.Taxi}):e.Taxi=t(e,n,r)}(function(t,e,n){"use strict";function r(){o(),q.autoload&&B.load()}function o(){for(var t=n.querySelectorAll("["+q.attr+"]"),e=0,r=t.length;r>e;e++){var o=t[e].getAttribute(q.attr);o=o.split(",");for(var a=0,u=o.length;u>a;a++)y(w,o[a]+"")||w.push(m(o[a]))}}function a(t){var e=new XMLHttpRequest,n=q.cache?"":"?"+ +new Date,r=function(){4===e.readyState&&(this.status>400?(l(t),0>=D&&f()):(this.response||this.responseText)&&(u(this.response||this.responseText),c(t,this.response||this.responseText),0>=D&&f()))};void 0===e.onload?e.onreadystatechange=r:e.onload=r,e.onerror=function(){l(t),0>=D&&f()},e.open("get",q.path+t+".js"+n,!0),e.send()}function u(t,e,r){var o=document.createElement("script");o.setAttribute("defer","defer"),o.setAttribute("async","async"),t?o.text=t:(o.setAttribute("src",e),x(o,"load",function(t){r.call(this,t.type,o.textContent||o.innerText)}),x(o,"error",function(t){n.querySelector("head").removeChild(o),r.call(this,t.type)})),n.querySelector("head").appendChild(o)}function i(t,e){u(e.data),c(t),0>=D&&f()}function c(e,n){D--,A&&n&&s(e,n),T.push(e.toString()),q.onload&&"function"==typeof q.onload&&q.onload.call(t,e,!n)}function l(e){D--,b.push(e.toString()),q.onerror&&"function"==typeof q.onerror&&q.onerror.call(t,e)}function f(){b.length>0&&q.onerror&&"function"==typeof q.onerror?q.onerror.call(t,T,b):q.ondone&&"function"==typeof q.ondone&&q.ondone.call(t,T,b),P&&"function"==typeof P&&(P.call(t),P=null)}function s(t,e){var n=+new Date,r={};r.data=e,r.time=n,r.buster=q.cacheBuster,r.expire=n+60*q.expiration*60*1e3,localStorage.setItem(q.storagePrefix+t,JSON.stringify(r))}function d(t){return t.data&&t.expire-+new Date>0&&t.buster===q.cacheBuster}function p(t){try{var e=JSON.parse(localStorage.getItem(q.storagePrefix+t));return d(e)?e:(localStorage.removeItem(q.storagePrefix+t),!1)}catch(n){return!1}}function h(){try{return"localStorage"in e&&null!==e.localStorage}catch(t){return!1}}function g(t,e,n,r,o){var a=t.target;y(T,e)&&n&&"function"==typeof n?n.call(a,t,T,b):(r&&"function"==typeof r&&r.call(a),t.preventDefault?t.preventDefault():t.returnValue=!1,w.push(e),P=function(){n&&"function"==typeof n&&n.call(a,t,T,b)},o.load())}function v(){for(var t=1,e=arguments.length;e>t;t++)for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(arguments[0][n]=arguments[t][n]);return arguments[0]}function y(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]==e)return!0;return!1}function m(t){return String.prototype.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function x(t,e,n){t.attachEvent?(t["e"+e+n]=n,t[e+n]=function(){t["e"+e+n](window.event)},t.attachEvent("on"+e,t[e+n])):t.addEventListener(e,n,!1)}var S=0,w=[],b=[],T=[],q={},A=h(),D=0,P=null,E={onfile:null,onerror:null,ondone:null,path:"/",attr:"data-require",autoload:!0,store:!0,cache:!0,storagePrefix:"loader-",expiration:2,cacheBuster:""},B=function(t){return S=0,w=[],b=[],T=[],q=v({},E,t),A=A&&q.store,r(),B};return B.load=function(t){return setTimeout(function(){var e=!1;D=w.length,t&&(T=[],b=[],o());for(var n=0,r=w.length;r>n;n++){var u=w[n];y(T,u)||(A&&(e=p(u)),e?i(u,e):a(u))}},0),B},B.onclick=function(t,e,r,o){for(var a=n.querySelectorAll(t),u=this,i=0,c=a.length;c>i;i++)x(a[i],"click",function(t){g(t,e,r,o,u)})},B.clearStorage=function(){return A&&localStorage.clear(),B},B.done=function(t){return q.ondone=t,B},B.bundle=function(t){return q.onload=t,B},B.error=function(t){return q.onerror=t,B},B.loaded=T,B.failed=b,B},this,window,document);